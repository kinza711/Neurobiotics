"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[21177],{411829:(e,t,a)=>{a.r(t),a.d(t,{default:()=>o});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CloseupCommentButton_pin",selections:[{args:null,kind:"FragmentSpread",name:"useIsInCloseupShoppingRefinementsExp_pin"}],type:"Pin",abstractKey:null};i.hash="a5d325439082b09d222b6679a4a5ebb6";let o=i},754318:(e,t,a)=>{var i;a.r(t),a.d(t,{default:()=>n});let o={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useCanPerformAction_board",selections:[i={alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"owner",plural:!1,selections:[i],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"collaboratedByMe",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"collaboratorPermissions",storageKey:null}],type:"Board",abstractKey:null};o.hash="416539a057718ff36ac5d9d06916c2d4";let n=o},71272:(e,t,a)=>{a.r(t),a.d(t,{default:()=>M});var i,o=a(667294),n=a(616550),s=a(883119);a(422578);var r=a(775725),l=a(5629),d=a(47848),c=a(144326),p=a(584288),u=a(785893);let h=void 0!==i?i:i=a(411829);function m({pinKey:e}){let t=(0,c.ZP)(),a=(0,p.t)(),i=(0,d.Z)(h,e),{isInCloseupShoppingRefinementsExp:o}=(0,r.Z)({pinKey:i}),n=t.bt("Comment", "Comment", "Closeup.Comment.Icon", undefined, true);return(0,u.jsx)(s.hU,{accessibilityLabel:n,icon:"speech-outline",onClick:()=>{let e=document.getElementById("canonical-card"),t=o&&document.querySelector('[data-root-margin="search-one-bar"]'),i=l.Lu+l.uS,n=32;t&&(n+=i);let s=a+n;if(e){let t=e.getBoundingClientRect().top+window.scrollY-s;window.scrollTo({top:t,behavior:"smooth"})}},size:"lg",tooltip:{text:n}})}var g=a(301916),_=a(510526),b=a(629586),y=a(656412),x=a(452639),v=a(873725),f=a(477058),w=a(602185),A=a(995497),k=a(868808),S=a(383399),P=a(501912),I=a(801621),j=a(590045),C=a(115642),R=a(167210),Z=a(241716),B=a(993641),E=a(179735);let T=(0,E.Z)(()=>Promise.all([a.e(29060),a.e(73777),a.e(53970)]).then(a.bind(a,243789)),void 0,"app-common-react-components-closeup-CloseupBody-SaveAffordance"),O=(0,E.Z)(()=>Promise.resolve().then(a.bind(a,241925)),void 0,"SecondarySendButtonCommon"),z=(0,E.Z)(()=>Promise.all([a.e(97270),a.e(73583),a.e(24859)]).then(a.bind(a,373583)),void 0,"ReactionPickerContainer"),D=new s.Ry(5);function M({goBack:e,gridDescription:t,isDeletedStoryPin:a,isEligibleForPinReactions:i,isOnSecretBoard:r,onEditSubmit:l,pin:d,viewParameter:p,viewType:h,onSaveButtonClick:E,showRepinOnInitialRender:M,isStoryPin:L,actionBarContainerRef:F,outerPaddingSize:K=j.g9,maxWidth:G,showLeadPin:H}){let U=(0,c.ZP)(),q=(0,n.TH)(),W=(0,P.Z)(),{showEnabledSaveBehavior:Y}=(0,B.Yh)(!0),{imgSrc:N}=(0,x.r)(),{clientTrackingParams:V,inCommentFooterRedesignExp:$,isCloseupRelatedPinsAboveTheFoldEnabled:X,showCloseupContentRight:J,closeupWithinMasonryEnabled:Q,peekCloseupEnabled:ee}=(0,C.x4)(),{viewType:et,viewParameter:ea}=(0,f.SU)(),ei=(0,S.Z)(),eo=(0,I.q6)(ei,d?.pinner?.id,W),[en,es]=(0,o.useState)(!!(0,k.mB)(q.search).share),[er,el]=(0,o.useState)(!1),ed=(0,o.useCallback)(e=>el(e),[]),ec=(0,o.useCallback)(()=>es(!1),[]),ep=(0,o.useCallback)(()=>es(e=>!e),[]),eu=d.board?.owner?.id||d.pinner?.id,{access:eh=[],favorited_by_me:em,reaction_counts:eg,section:e_}=d,eb=d?.board,{canPerformAction:ey}=(0,v.Z)({boardKey:null!=eb?{type:"deprecated",data:eb}:null}),ex=ey({action:4,viewer:ei})||eh.includes("write")||eh.includes("delete")||eo,ev=Q?G:G||j.Gg,ef=(0,y.Z)({pinKey:{type:"deprecated",data:d},orbacActingAs:W,viewer:ei}),ew=!!Object.keys(eg||{}).length,eA=!a&&ef,ek=q.state?.fromEggsBoard,eS=r||a?null:(0,u.jsx)(w.Z,{name:"CloseupActionBar_SecondarySendButton",children:(0,u.jsx)(O,{closeupWithinMasonryEnabled:Q,controllerOptions:{flyoutDisplayOptions:Q?{shownWithinProfileHeader:!0,idealDirection:"down",forceDirection:!0}:{},isFlyoutOpen:en,loggingOptions:{component:194,element:72,viewParameter:p||ea,viewType:h||et},onFlyoutDismiss:ec,onToggleFlyout:ep,sendObject:{type:"pin",description:t,id:d.id,imageUrl:N,ownerId:eu,url:`/pin/${d.id}/`,clientTrackingParams:V}}})}),eP=(0,u.jsx)(s.xu,{alignItems:"center",color:Q?"transparent":"default",dangerouslySetInlineStyle:{__style:{marginLeft:Q?"":"-14px"}},"data-test-id":"closeup-action-items",display:"flex",justifyContent:"between",maxWidth:ev,rounding:2,children:(0,u.jsxs)(s.kC,{alignItems:"stretch",gap:Q?2:0,justifyContent:"start",children:[!eo&&!!i&&$&&(0,u.jsx)(w.Z,{name:"CloseupActionBar_ReactionPickerContainer",children:(0,u.jsxs)(s.xu,{alignItems:"center",display:"flex",marginEnd:ew?2:0,children:[(0,u.jsx)(z,{clientTrackingParams:V,handleReactionTrayHover:ed,idealDirection:Q?"down":void 0,inCommentFooterRedesignExp:!0,pinId:d.id,reactionButtonSize:48,reactionByMe:d.reaction_by_me,reactionIconSize:20,showTooltip:!0,viewParameter:p,viewType:h}),(0,u.jsx)(A.Z,{pinId:d.id,reactionCounts:eg,showPrettyNumber:$})]})}),Q&&(0,u.jsx)(m,{pinKey:{type:"deprecated",data:d}}),eS,(0,u.jsx)(s.xu,{children:(0,u.jsx)(s.xu,{"data-test-id":"closeup-more-options",children:(0,u.jsx)(_.Z,{carouselSlotCurrentIndex:d&&d.carousel_data&&d.carousel_data.index,clientTrackingParams:V,closeupWithinMasonryEnabled:Q,goBack:e,isReactionTrayOpen:er,onEditSubmit:l,pinKey:{type:"deprecated",data:d},showEditPin:eA,viewParameter:p,viewType:h})})}),ex&&!eA&&!X&&(0,u.jsx)(s.xu,{marginEnd:1,children:(0,u.jsx)(g.Z,{carouselSlotCurrentIndex:d&&d.carousel_data&&d.carousel_data.index,clientTrackingParams:V,onSubmit:l,pinId:d.id,view:3,viewParameter:p})}),!eo&&eA&&!X&&(0,u.jsx)(s.xu,{"data-test-id":"closeup-favorite-button",children:(0,u.jsx)(s.u,{inline:!0,text:U.bt("Favourite", "Favorite", "Closeup.Favorite.Icon", undefined, true),zIndex:D,children:(0,u.jsx)(b.Z,{board:eb,favorited:!!em,pinId:d.id,section:e_})})})]})}),eI=X?K:K/2,ej=(0,u.jsx)(s.xu,{ref:F,color:"default",dangerouslySetInlineStyle:{__style:{paddingTop:K/2,paddingRight:X?eI:K,paddingLeft:Q?K:void 0,paddingBottom:Q?K/2:void 0,borderRadius:L?"0px 32px 32px 32px":J?"0px 32px 32px 0":void 0}},"data-test-id":"closeup-body-sticky-content",marginTop:Q?0:L?-5:0,minHeight:X?void 0:60+K,width:Q?"100%":void 0,children:(0,u.jsx)(s.xu,{"data-test-id":"closeupActionBar",children:(0,u.jsxs)(s.kC,{alignItems:"stretch",justifyContent:"between",children:[eP,!a&&!eo&&(0,u.jsx)(s.xu,{marginStart:3,children:(0,u.jsx)(T,{boardCount:ei.isAuth?ei.boardCount:0,clientTrackingParams:V,fromEggsBoard:ek||!1,onClickCallback:E,pin:d,showEnabledSaveBehavior:Y,showRepinOnInitialRender:M,variant:"closeup",viewParameter:p,viewType:h})})]})})});if(H||Q)return ej;let eC=L&&!ee?Z.cI+4:Z.hu;return ee&&(eC=0),(0,u.jsx)(s.Le,{top:eC,zIndex:R.mS,children:ej})}},873725:(e,t,a)=>{a.d(t,{P:()=>l,Z:()=>c});var i,o=a(667294);a(167912);var n=a(265780),s=a(934397),r=a(47848);let l=e=>{let{action:t,viewer:a,board:i}=e;return!!i&&((0,n.Z)(a,i.owner?.entityId)||(0,s.Z)(i.collaboratedByMe,a)&&!!i.collaboratorPermissions?.includes(t))},d=void 0!==i?i:i=a(754318);function c({boardKey:e}){let t=(0,r.Z)(d,e),a=t?.owner?.entityId??"",i=(0,o.useMemo)(()=>t?.collaboratorPermissions,[t?.entityId]);return{canPerformAction:(0,o.useCallback)(({action:e,viewer:o})=>l({action:e,viewer:o,board:{collaboratedByMe:t?.collaboratedByMe,collaboratorPermissions:i,owner:a?{entityId:a}:null}}),[t?.collaboratedByMe,i,a])}}},995497:(e,t,a)=>{a.d(t,{Z:()=>_});var i=a(667294),o=a(883119),n=a(923952),s=a(488792),r=a(357013),l=a(144326),d=a(104778),c=a(755349),p=a(750077),u=a(785893);function h(e,t,a){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var i=a.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:i+"")in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}let m=(0,i.lazy)(()=>a.e(17631).then(a.bind(a,717631)));class g extends i.PureComponent{constructor(...e){super(...e),h(this,"state",{displayAggregationModal:!1}),h(this,"showAggregationModal",()=>{let{disableModal:e,logContextEvent:t}=this.props;e||(this.setState({displayAggregationModal:!0}),t({event_type:101,view_type:3,view_parameter:139,component:13458,element:11435,aux_data:{objectId:this.props.pinId}}))}),h(this,"hideAggregationModal",()=>{this.setState({displayAggregationModal:!1})})}render(){let{displayAggregationModal:e}=this.state,{isBold:t,isInCommentModule:a,isStoryPin:i,paddingY:s,pinId:l,reactionCounts:h,showPrettyNumber:g}=this.props,_=h?(0,c.At)(h):null,b=h?(0,c.Ud)(h):0,y=!!_&&_.length>0&&_.filter(e=>!!d.GY[e]).map((e,t)=>{let a=e&&d.GY[e]?d.GY[e]:"",{gridAsset:i}=(0,d.fW)(a,this.props.i18n);return(0,u.jsx)(o.xu,{dangerouslySetInlineStyle:{__style:{marginRight:2}},children:(0,u.jsx)(o.xu,{dangerouslySetInlineStyle:{__style:{backgroundImage:`url(${i})`,backgroundPosiiton:"center",backgroundRepeat:"no-repeat",backgroundSize:"cover"}},height:19,width:19})},t)});return(0,u.jsxs)(o.xu,{children:[(0,u.jsx)(o.iP,{accessibilityLabel:`${b} reactions`,dataTestId:"reactions-count-button",onTap:a?void 0:this.showAggregationModal,children:!!y&&(0,u.jsx)(o.xu,{"data-test-id":"aggregated-reactions-container",display:"inlineBlock",children:g?(0,u.jsx)(o.xu,{dangerouslySetInlineStyle:{__style:{cursor:"pointer"}},children:(0,u.jsx)(o.xv,{weight:"bold",children:(0,u.jsx)(r.Z,{shortform:!0,shortformMaximumFractionDigits:1,value:b})})}):(0,u.jsxs)(o.xu,{alignItems:"center",dangerouslySetInlineStyle:{__style:{cursor:"pointer"}},"data-test-id":"aggregated-reactions-container",direction:"row",display:"flex",height:i?"auto":19,paddingY:s??(i?0:6),children:[(0,u.jsx)(o.kC,{alignItems:"stretch",direction:"row",justifyContent:"start",children:y}),(0,u.jsx)(o.xu,{paddingX:1,children:(0,u.jsx)(o.xv,{color:t?"default":"subtle",size:n.n,weight:t?"bold":"normal",children:(0,u.jsx)(r.Z,{shortform:!0,shortformMaximumFractionDigits:1,value:b})})})]})})}),e&&b&&(0,u.jsx)(p.Z,{children:(0,u.jsx)(m,{aggregatedReactions:y,onDismiss:this.hideAggregationModal,pinId:l,totalReactionCount:b})})]})}}h(g,"defaultProps",{isBold:!0});let _=function(e){let t=(0,l.ZP)(),a=(0,s.Z)();return(0,u.jsx)(g,{...e,i18n:t,logContextEvent:a})}},104778:(e,t,a)=>{a.d(t,{GY:()=>f,Jg:()=>v,fW:()=>w});var i=a(184508),o=a(147916),n=a(167361),s=a(697031),r=a(404247),l=a(836866),d=a(620668),c=a(86119),p=a(753873),u=a(873774),h=a(479197),m=a(110099),g=a(244892),_=a(485846),b=a(461471),y=a(662502),x=a(239784);let v=["goodIdea","love","thanks","wow","haha"],f={7:"goodIdea",1:"love",13:"thanks",11:"wow",5:"haha"},w=(e,t,a="darkGray")=>{let v={default:{staticAsset:"white"===a?h:u},goodIdea:{staticAsset:n,animatedAsset:i,gridAsset:o,label:t.bt("Good idea", "Good idea", "Reaction label to tell a creator that their pin is a good idea", undefined, true),htmlStyle:`
    @keyframes play90 {
        0% {
        background-position: 0px 0px;
        }
        100% {
        background-position: -3600px 0px;
        }
    }
    `,animationStyle:"play90 3000ms steps(90) infinite forwards",type:7},haha:{staticAsset:l,animatedAsset:s,gridAsset:r,label:t.bt("Ha-ha", "Haha", "Reaction label to tell a creator that the pinner laughed because of their pin", undefined, true),htmlStyle:`
    @keyframes play60 {
        0% {
        background-position: 0px 0px;
        }
        100% {
        background-position: -2400px 0px;
        }
    }
    `,animationStyle:"play60 2000ms steps(60) infinite forwards",type:5},love:{staticAsset:p,animatedAsset:d,gridAsset:c,label:t.bt("Love", "Love", "Reaction label to tell a creator that the pinner loved their pin", undefined, true),htmlStyle:`
    @keyframes play90 {
        0% {
        background-position: 0px 0px;
        }
        100% {
        background-position: -3600px 0px;
        }
    }
    `,animationStyle:"play90 3000ms steps(90) infinite forwards",type:1},thanks:{staticAsset:_,animatedAsset:m,gridAsset:g,label:t.bt("Thanks", "Thanks", "Reaction label to tell a creator thank you", undefined, true),htmlStyle:`
    @keyframes play60 {
        0% {
        background-position: 0px 0px;
        }
        100% {
        background-position: -2400px 0px;
        }
    }
    `,animationStyle:"play60 2000ms steps(60) infinite forwards",type:13},wow:{staticAsset:x,animatedAsset:b,gridAsset:y,label:t.bt("Wow", "Wow", "Reaction label to tell a creator that the pinner was wowed by their pin", undefined, true),htmlStyle:`
    @keyframes play90 {
        0% {
        background-position: 0px 0px;
        }
        100% {
        background-position: -3600px 0px;
        }
    }
    `,animationStyle:"play90 3000ms steps(90) infinite forwards",type:11}};return e&&v[e]?v[e]:v.default}},993641:(e,t,a)=>{a.d(t,{ZP:()=>l,tY:()=>p,Xt:()=>d,$7:()=>u,Yh:()=>c});var i=a(545007),o=a(297728),n=a(961754),s=a(383399);let r={SAVE_TO_PROFILE:0,SHOW_BOARD_PICKER:1};function l(e){let t=(0,s.Z)(),a=t.isAuth&&t.id===e,{checkExperiment:i}=(0,o.F)(),r=(0,n.Z)(!t.isAuth||a?null:{name:"UserResource",options:{field_set_key:"quicksave",user_id:e}});return{showEnabledSaveBehavior:a&&t.has_quicksave_board||!!(t.isAuth&&(r??{}).data?.has_quicksave_board)||(a||t.isAuth)&&!t.has_quicksave_board&&!(r??{}).data?.has_quicksave_board&&i("profile_saves_for_all").anyEnabled}}function d(e){let t=(0,s.Z)(),a=t.isAuth&&t.id===e,i=(0,n.Z)(!t.isAuth||a?null:{name:"UserResource",options:{field_set_key:"quicksave",user_id:e}});return{boardlessPinsEnabled:a&&t.has_quicksave_board||!!(t.isAuth&&(i??{}).data?.has_quicksave_board)}}function c(e){let t=(0,i.I0)(),a=(0,s.Z)(),o=a.isAuth&&!!a.boardCount&&a.boardCount<5&&e,r=(0,n.Z)(o&&e?{name:"UserResource",options:{field_set_key:"save_behavior",user_id:a.isAuth&&a.id}}:null);return a.isAuth&&void 0===a.save_behavior&&r&&r.data?.id&&t({type:"UPDATE_USER_SAVE_BEHAVIOR",payload:{saveBehavior:r.data.save_behavior}}),{showEnabledSaveBehavior:o}}function p(e){let t;let a=(0,s.Z)();return e&&(a.save_behavior===r.SAVE_TO_PROFILE?t={type:"classic"}:a.save_behavior===r.SHOW_BOARD_PICKER&&(t={type:"inline"})),{saveBehaviorType:t}}function u(){let e=(0,s.Z)();return e.isAuth&&(e?.secretBoardCount??0)>0}},184508:e=>{e.exports="https://s.pinimg.com/webapp/goodIdeaAnimated-38017d78.svg"},147916:e=>{e.exports="https://s.pinimg.com/webapp/goodIdeaGrid-1d2a7f73.svg"},167361:e=>{e.exports="https://s.pinimg.com/webapp/goodIdeaStatic-e5b1d255.svg"},697031:e=>{e.exports="https://s.pinimg.com/webapp/hahaAnimated-357648f6.svg"},404247:e=>{e.exports="https://s.pinimg.com/webapp/hahaGrid-661fe52b.svg"},836866:e=>{e.exports="https://s.pinimg.com/webapp/hahaStatic-2ec8cbd3.svg"},620668:e=>{e.exports="https://s.pinimg.com/webapp/loveAnimated-012ac08a.svg"},86119:e=>{e.exports="https://s.pinimg.com/webapp/loveGrid-6f35c2db.svg"},753873:e=>{e.exports="https://s.pinimg.com/webapp/loveStatic-d24adaac.svg"},873774:e=>{e.exports="https://s.pinimg.com/webapp/reactionHeartOutline-1e47063b.svg"},479197:e=>{e.exports="https://s.pinimg.com/webapp/reactionHeartOutlineWhite-7ab6ffbe.svg"},110099:e=>{e.exports="https://s.pinimg.com/webapp/thanksAnimated-4e360468.svg"},244892:e=>{e.exports="https://s.pinimg.com/webapp/thanksGrid-6639aa29.svg"},485846:e=>{e.exports="https://s.pinimg.com/webapp/thanksStatic-2e0daa97.svg"},461471:e=>{e.exports="https://s.pinimg.com/webapp/wowAnimated-d2fbc823.svg"},662502:e=>{e.exports="https://s.pinimg.com/webapp/wowGrid-50ab193b.svg"},239784:e=>{e.exports="https://s.pinimg.com/webapp/wowStatic-91d88784.svg"}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/CloseupActionBarCommon.en_IN-1cb888d1ad3683fb.mjs.map